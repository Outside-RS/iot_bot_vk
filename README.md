# VK Bot –¥–ª—è –ò–û–¢

–£–º–Ω—ã–π —á–∞—Ç-–±–æ—Ç –í–ö–æ–Ω—Ç–∞–∫—Ç–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.
–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ –æ—Ç–≤–µ—Ç–æ–≤ (–ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏ –ø–æ —Å–º—ã—Å–ª—É —á–µ—Ä–µ–∑ AI), —Ç–∏–∫–µ—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Å–≤—è–∑–∏ —Å —Ç—å—é—Ç–æ—Ä–∞–º–∏ –∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –≤–µ–±-–∞–¥–º–∏–Ω–∫—É.

![Node.js](https://img.shields.io/badge/Node.js-v18+-green)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-pgvector-blue)
![Ollama](https://img.shields.io/badge/AI-Ollama-orange)
![Docker](https://img.shields.io/badge/Docker-Ready-2496ED)

##  ‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

###   –î–ª—è –°—Ç—É–¥–µ–Ω—Ç–æ–≤
*   **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫:** –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏–∑ –ë–∞–∑—ã –ó–Ω–∞–Ω–∏–π. –ï—Å–ª–∏ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –Ω–µ—Ç, –Ω–µ–π—Ä–æ—Å–µ—Ç—å –∏—â–µ—Ç –ø–æ —Å–º—ã—Å–ª—É (Vector Search).
*   **–¢–∏–∫–µ—Ç—ã:** –ï—Å–ª–∏ –±–æ—Ç –Ω–µ –Ω–∞—à–µ–ª –æ—Ç–≤–µ—Ç, –≤–æ–ø—Ä–æ—Å –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∂–∏–≤–æ–º—É —Ç—å—é—Ç–æ—Ä—É.
*   **–ò—Å—Ç–æ—Ä–∏—è:** –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–æ–≤ —Å–≤–æ–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π (–û–∂–∏–¥–∞–Ω–∏–µ / –í —Ä–∞–±–æ—Ç–µ / –†–µ—à–µ–Ω–æ).
*   **–ü—Ä–æ—Ñ–∏–ª—å:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ (–§–ò–û, –ì—Ä—É–ø–ø–∞).

###   –î–ª—è –¢—å—é—Ç–æ—Ä–æ–≤ (–û–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤)
*   **–í—Ö–æ–¥ –ø–æ –∫–æ–¥—É:** –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É—á–µ–±–Ω—ã–º –≥—Ä—É–ø–ø–∞–º.
*   **–ú—É–ª—å—Ç–∏-—á–∞—Ç:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–µ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏–∞–ª–æ–≥–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
*   **–û—á–µ—Ä–µ–¥—å:** –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Ö–æ–¥—è—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ—Ç "—Å–≤–æ–∏—Ö" –≥—Ä—É–ø–ø.
*   **–£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –û–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö, –¥–∞–∂–µ –µ—Å–ª–∏ —Ç—å—é—Ç–æ—Ä –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º —Å—Ç—É–¥–µ–Ω—Ç–æ–º.

###   –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (Web)
*   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ FAQ:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/–£–¥–∞–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤.
*   **AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è:** –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ —Å–∞–π—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–µ–∫—Ç–æ—Ä—ã —á–µ—Ä–µ–∑ Ollama.
*   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–æ–≤ –¥–ª—è —Ç—å—é—Ç–æ—Ä–æ–≤.
*   **–†–∞—Å—Å—ã–ª–∫–∞:** –ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (–í—Å–µ–º / –°—Ç—É–¥–µ–Ω—Ç–∞–º / –¢—å—é—Ç–æ—Ä–∞–º / –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≥—Ä—É–ø–ø–µ).
*   **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –û–±–∑–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∏–∫–µ—Ç–æ–≤.

---

##   üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   **Runtime:** Node.js (JavaScript)
*   **Framework:** VK-IO (Bot), Express (Web)
*   **Database:** PostgreSQL + —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `pgvector` (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤).
*   **AI / ML:** Ollama (Local LLM) + –º–æ–¥–µ–ª—å `nomic-embed-text` (–¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤).
*   **Frontend:** EJS (Server-side rendering).

---

##   üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
1.  –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **Docker Desktop**.
2.  –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è **Ollama**.
3.  **Node.js** (v16 –∏–ª–∏ –≤—ã—à–µ).

### –®–∞–≥ 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
git clone https://github.com/your-username/iot-bot-vk.git
cd iot-bot-vk
npm install
```

### –®–∞–≥ 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
# –¢–æ–∫–µ–Ω –≥—Ä—É–ø–ø—ã –í–ö–æ–Ω—Ç–∞–∫—Ç–µ
VK_TOKEN=–≤–∞—à_–¥–ª–∏–Ω–Ω—ã–π_—Ç–æ–∫–µ–Ω
VK_GROUP_ID=id_–≥—Ä—É–ø–ø—ã

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö (Docker)
DB_HOST=localhost
DB_PORT=5433
DB_USER=postgres
DB_PASSWORD=password
DB_NAME=postgres

# –ü–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ê–¥–º–∏–Ω–∫—É
ADMIN_PASS=admin


–®–∞–≥ 3. –ó–∞–ø—É—Å–∫ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö (Docker)
–ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å PostgreSQL –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–µ–∫—Ç–æ—Ä–æ–≤:
docker run -d --name vk-bot-db -e POSTGRES_PASSWORD=mysecretpassword -p 5433:5432 ankane/pgvector


–®–∞–≥ 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AI (Ollama)
–°–∫–∞—á–∏–≤–∞–µ–º –º–æ–¥–µ–ª—å –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞:
ollama pull nomic-embed-text
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω–∞ (ollama serve –∏–ª–∏ –∑–Ω–∞—á–æ–∫ –≤ —Ç—Ä–µ–µ).

–®–∞–≥ 5. –ú–∏–≥—Ä–∞—Ü–∏—è –∏ –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã
–ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã –∏ –∑–∞–ª—å–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ faq_data.json:
```
node migrate_all.js
```

–®–∞–≥ 6. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
```
node index.js
```

–ë–æ—Ç –Ω–∞—á–Ω–µ—Ç —Å–ª—É—à–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.
–ê–¥–º–∏–Ω–∫–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3000.


üìÇ–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
index.js ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–∑–∞–ø—É—Å–∫–∞–µ—Ç –ë–æ—Ç–∞ –∏ –°–∞–π—Ç).
bot.js ‚Äî –õ–æ–≥–∏–∫–∞ —á–∞—Ç-–±–æ—Ç–∞ (State Machine, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫).
database.js ‚Äî –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –∏ —Ñ—É–Ω–∫—Ü–∏–∏ AI.
routes/admin.js ‚Äî –õ–æ–≥–∏–∫–∞ –≤–µ–±-–∞–¥–º–∏–Ω–∫–∏.
views/ ‚Äî HTML-—à–∞–±–ª–æ–Ω—ã —Å–∞–π—Ç–∞ (EJS).
migrate_all.js ‚Äî –°–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
update_faq.js ‚Äî –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü.
faq_data.json ‚Äî –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ë–∞–∑—ã –ó–Ω–∞–Ω–∏–π.

üîÑ –ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –ë–∞–∑—É –ó–Ω–∞–Ω–∏–π
–°–ø–æ—Å–æ–± 1 (–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π): –ß–µ—Ä–µ–∑ –í–µ–±-–∞–¥–º–∏–Ω–∫—É (http://localhost:3000/faq). –í–µ–∫—Ç–æ—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
–°–ø–æ—Å–æ–± 2 (–ß–µ—Ä–µ–∑ –∫–æ–¥):
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª faq_data.json.
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```
node update_faq.js
```
