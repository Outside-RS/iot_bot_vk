<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>–ë–∞–∑–∞ –ó–Ω–∞–Ω–∏–π</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            background: #f4f6f8;
        }

        .header {
            background: #2c3e50;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
        }

        .header a {
            color: white;
            text-decoration: none;
            margin-left: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .form-box {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border-left: 5px solid #27ae60;
        }

        input,
        textarea {
            width: 100%;
            padding: 10px;
            margin: 5px 0 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }

        label {
            font-weight: bold;
            font-size: 14px;
            color: #555;
        }

        button.btn-add {
            background: #27ae60;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        button.btn-add:hover {
            background: #219150;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        th {
            background: #34495e;
            color: white;
            padding: 15px;
            text-align: left;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #eee;
            vertical-align: top;
        }

        tr:hover {
            background: #f9f9f9;
        }

        .tag {
            background: #e1f5fe;
            color: #0277bd;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
        }

        .del-btn {
            color: #c0392b;
            cursor: pointer;
            text-decoration: none;
            font-weight: bold;
        }

        .alert {
            padding: 15px;
            background: #f8d7da;
            color: #721c24;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .success {
            padding: 15px;
            background: #d4edda;
            color: #155724;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <div class="header">
        <div>üìö <b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–∞–∑–æ–π –ó–Ω–∞–Ω–∏–π</b></div>
        <div><a href="/">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</a></div>
    </div>

    <div class="container">
        <% if (error) { %>
            <div class="alert">
                <%= error %>
            </div>
            <% } %>
                <% if (success) { %>
                    <div class="success">
                        <%= success %>
                    </div>
                    <% } %>

                        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
                        <div class="form-box">
                            <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å</h3>
                            <form action="/faq/add" method="POST">
                                <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px;">
                                    <div>
                                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                        <input type="text" name="category" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°—Ç–∏–ø–µ–Ω–¥–∏—è" required>
                                    </div>
                                    <div>
                                        <label>–í–æ–ø—Ä–æ—Å —Å—Ç—É–¥–µ–Ω—Ç–∞ (–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π)</label>
                                        <input type="text" name="question" placeholder="–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –¥–µ–Ω—å–≥–∏?" required>
                                    </div>
                                </div>

                                <label>–û—Ç–≤–µ—Ç –±–æ—Ç–∞</label>
                                <textarea name="answer" rows="4" placeholder="–¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞..." required></textarea>

                                <label>–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (–°–∏–Ω–æ–Ω–∏–º—ã –¥–ª—è –ø–æ–∏—Å–∫–∞) ‚Äî –°–∫—Ä—ã—Ç—ã –æ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞</label>
                                <input type="text" name="keywords" placeholder="–¥–µ–Ω—å–≥–∏, —Å—Ç–∏–ø–µ–Ω–¥–∏—è, –≤—ã–ø–ª–∞—Ç–∞, –∫–∞—Ä—Ç–∞">

                                <button type="submit" class="btn-add">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å –í–µ–∫—Ç–æ—Ä (Ollama)</button>
                            </form>
                        </div>

                        <!-- –¢–∞–±–ª–∏—Ü–∞ -->
                        <h3>–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤: <%= faq.length %>
                        </h3>
                        <table>
                            <thead>
                                <tr>
                                    <th width="5%">ID</th>
                                    <th width="15%">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                    <th width="30%">–í–æ–ø—Ä–æ—Å</th>
                                    <th width="35%">–û—Ç–≤–µ—Ç</th>
                                    <th width="15%">–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% faq.forEach(function(item) { %>
                                    <tr>
                                        <td>
                                            <%= item.id %>
                                        </td>
                                        <td><span class="tag">
                                                <%= item.category %>
                                            </span></td>
                                        <td>
                                            <b>
                                                <%= item.question %>
                                            </b>
                                            <% if (item.keywords) { %>
                                                <br><small style="color: #888;">üîë <%= item.keywords %></small>
                                                <% } %>
                                        </td>
                                        <td><small>
                                                <%= item.answer %>
                                            </small></td>
                                        <td>
                                            <!-- –ö–ù–û–ü–ö–ê –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø (–ù–û–í–ê–Ø) -->
                                            <a href="/faq/edit/<%= item.id %>"
                                                style="text-decoration: none; margin-right: 10px;"
                                                title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                                                ‚úèÔ∏è
                                            </a>

                                            <!-- –ö–ù–û–ü–ö–ê –£–î–ê–õ–ï–ù–ò–Ø -->
                                            <form action="/faq/delete/<%= item.id %>" method="POST"
                                                onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å?');"
                                                style="display:inline;">
                                                <button type="submit" class="del-btn"
                                                    style="background:none; border:none; cursor:pointer;">üóë</button>
                                            </form>
                                        </td>
                                    </tr>
                                    <% }); %>
                            </tbody>
                        </table>
    </div>
</body>

</html>